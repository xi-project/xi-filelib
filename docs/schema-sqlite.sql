CREATE TABLE xi_filelib_folder (id INTEGER NOT NULL, parent_id INTEGER DEFAULT NULL, uuid VARCHAR(36) NOT NULL, data CLOB NOT NULL, foldername VARCHAR(255) NOT NULL, folderurl CLOB NOT NULL, PRIMARY KEY(id), CONSTRAINT FK_A5EA9E8B727ACA70 FOREIGN KEY (parent_id) REFERENCES xi_filelib_folder (id) NOT DEFERRABLE INITIALLY IMMEDIATE);
CREATE UNIQUE INDEX UNIQ_A5EA9E8BD17F50A6 ON xi_filelib_folder (uuid);
CREATE INDEX IDX_A5EA9E8B727ACA70 ON xi_filelib_folder (parent_id);
CREATE TABLE xi_filelib_resource (id INTEGER NOT NULL, uuid VARCHAR(36) NOT NULL, data CLOB NOT NULL, hash VARCHAR(255) NOT NULL, mimetype VARCHAR(255) NOT NULL, filesize INTEGER NOT NULL, "exclusive" BOOLEAN NOT NULL, date_created DATETIME NOT NULL, PRIMARY KEY(id));
CREATE UNIQUE INDEX UNIQ_74D9533AD17F50A6 ON xi_filelib_resource (uuid);
CREATE TABLE xi_filelib_file (id INTEGER NOT NULL, folder_id INTEGER NOT NULL, resource_id INTEGER NOT NULL, uuid VARCHAR(36) NOT NULL, data CLOB NOT NULL, fileprofile VARCHAR(255) NOT NULL, filename VARCHAR(255) NOT NULL, date_created DATETIME NOT NULL, status INTEGER NOT NULL, PRIMARY KEY(id), CONSTRAINT FK_E8606524162CB942 FOREIGN KEY (folder_id) REFERENCES xi_filelib_folder (id) NOT DEFERRABLE INITIALLY IMMEDIATE, CONSTRAINT FK_E860652489329D25 FOREIGN KEY (resource_id) REFERENCES xi_filelib_resource (id) NOT DEFERRABLE INITIALLY IMMEDIATE);
CREATE UNIQUE INDEX UNIQ_E8606524D17F50A6 ON xi_filelib_file (uuid);
CREATE INDEX IDX_E8606524162CB942 ON xi_filelib_file (folder_id);
CREATE INDEX IDX_E860652489329D25 ON xi_filelib_file (resource_id);
CREATE UNIQUE INDEX folderid_filename_unique ON xi_filelib_file (folder_id, filename);
CREATE TABLE xi_filelib_versioned (uuid VARCHAR(255) NOT NULL, version VARCHAR(255) NOT NULL, resource_id INTEGER NOT NULL, PRIMARY KEY(uuid, version), CONSTRAINT FK_DE91B4E789329D25 FOREIGN KEY (resource_id) REFERENCES xi_filelib_resource (id) NOT DEFERRABLE INITIALLY IMMEDIATE);
CREATE INDEX IDX_DE91B4E789329D25 ON xi_filelib_versioned (resource_id);
